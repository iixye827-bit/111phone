<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Jellyfishå¯¼èˆª</title>
    <style>
        /* [æ ¸å¿ƒCSS - åŒ…å«æœ¬æ¬¡ç¾åŒ–å‡çº§ V6.0] */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', -apple-system, BlinkMacSystemFont, sans-serif; }
        :root { --day-color1: #f5f7fa; --day-color2: #e4eaf5; --night-color1: #1a1a2e; --night-color2: #16213e; --hold-border: #4299e1; --text-day: #2d3748; --text-night: #f0f2f5; --bg-day: #eef2f9; --bg-night: #1a1a2e; --shadow-light-day: rgba(255, 255, 255, 0.9); --shadow-dark-day: rgba(174, 190, 212, 0.4); --shadow-light-night: rgba(40, 45, 65, 0.9); --shadow-dark-night: rgba(0, 0, 0, 0.3); }
        body { min-height: 100vh; background: linear-gradient(135deg, var(--day-color1) 0%, var(--day-color2) 100%); padding: 20px; display: flex; flex-direction: column; align-items: center; transition: background 0.5s ease; touch-action: manipulation; overflow-x: hidden; }
        body.dark-mode { background: linear-gradient(135deg, var(--night-color1) 0%, var(--night-color2) 100%); --hold-border: #63b3ed; color: var(--text-night); }
        /* âœ¨ ä¿®æ”¹: æ ‡é¢˜å¡ç‰‡æ›´ç´§å‡‘ */
        .title-card { width: 100%; max-width: 800px; padding: 30px 20px 25px; margin: 20px 0; border-radius: 16px; box-shadow: 12px 12px 24px var(--shadow-dark-day), -12px -12px 24px var(--shadow-light-day); background-color: var(--bg-day); backdrop-filter: blur(8px); text-align: center; transition: all 0.5s ease; }
        body.dark-mode .title-card { box-shadow: 12px 12px 24px var(--shadow-dark-night), -12px -12px 24px var(--shadow-light-night); background-color: rgba(30, 35, 55, 0.9); }
        .editable-title, .editable-subtitle { /* ...æ ·å¼æ— å˜åŒ–... */ }
        
        /* âœ¨ ä¿®æ”¹: æ“ä½œæŒ‰é’®å®¹å™¨å’ŒæŒ‰é’®å¤§å° */
        .action-buttons-container { display: flex; justify-content: center; align-items: center; gap: 18px; margin-top: 25px; flex-wrap: wrap; }
        .action-btn { width: 40px; height: 40px; /* å°ºå¯¸å˜å° */ border-radius: 50%; border: none; cursor: pointer; transition: all 0.3s ease; box-shadow: 4px 4px 8px var(--shadow-dark-day), -4px -4px 8px var(--shadow-light-day); background-color: var(--bg-day); color: var(--text-day); font-size: 18px; display: flex; align-items: center; justify-content: center; user-select: none; -webkit-tap-highlight-color: transparent; }
        .action-btn:active { box-shadow: inset 3px 3px 6px var(--shadow-dark-day), inset -3px -3px 6px var(--shadow-light-day); }
        body.dark-mode .action-btn { box-shadow: 4px 4px 8px var(--shadow-dark-night), -4px -4px 8px var(--shadow-light-night); background-color: rgba(30, 35, 55, 1); color: var(--text-night); }
        body.dark-mode .action-btn:active { box-shadow: inset 3px 3px 6px var(--shadow-dark-night), inset -3px -3px 6px var(--shadow-light-night); }
        
        .nav-container, .nav-btn { /* ...æ ·å¼æ— å˜åŒ–... */ }

        /* ====== å¼¹çª—é€šç”¨æ ·å¼ ====== */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(5px); display: none; align-items: center; justify-content: center; z-index: 1000; opacity: 0; transition: opacity 0.3s ease; }
        .modal-overlay.show { display: flex; opacity: 1; }
        .modal-content { /* ...æ ·å¼æ— å˜åŒ–... */ } body.dark-mode .modal-content { /* ... */ } .modal-header { /* ... */ } .modal-input { /* ... */ }

        /* ====== â€œæ·»åŠ å¯¼èˆªâ€å¼¹çª—ç‰¹å®šæ ·å¼ (æ— å˜åŒ–) ====== */
        #addNavModal .modal-body, .type-selector, .folder-upload-area { /* ...æ ·å¼æ— å˜åŒ–... */ }
        
        /* ====== âœ¨ æ–°å¢: è°ƒè‰²ç›˜å¼¹çª—ç‰¹å®šæ ·å¼ ====== */
        .color-modal-body { display: flex; flex-direction: column; gap: 25px; }
        .color-picker-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .color-input-wrapper { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        .color-input-wrapper label { font-size: 14px; font-weight: 600; color: #5a6778; }
        body.dark-mode .color-input-wrapper label { color: #c0c6cc; }
        input[type="color"] { -webkit-appearance: none; -moz-appearance: none; appearance: none; width: 60px; height: 60px; background-color: transparent; border: none; border-radius: 50%; cursor: pointer; box-shadow: 4px 4px 8px var(--shadow-dark-day), -4px -4px 8px var(--shadow-light-day); }
        body.dark-mode input[type="color"] { box-shadow: 4px 4px 8px var(--shadow-dark-night), -4px -4px 8px var(--shadow-light-night); }
        input[type="color"]::-webkit-color-swatch { border-radius: 50%; border: 3px solid var(--bg-day); }
        body.dark-mode input[type="color"]::-webkit-color-swatch { border-color: var(--bg-night); }
        input[type="color"]::-moz-color-swatch { border-radius: 50%; border: 3px solid var(--bg-day); }
        body.dark-mode input[type="color"]::-moz-color-swatch { border-color: var(--bg-night); }
        .color-modal-actions { display: flex; gap: 15px; margin-top: 10px; }
        .randomize-btn { font-size: 24px !important; flex-shrink: 0; padding: 10px !important; width: 50px; }
    </style>
</head>
<body>
    <div class="title-card">
        <h1 class="editable-title" id="title">Jellyfishå¯¼èˆª</h1>
        <div class="editable-subtitle" id="subtitle">ç‚¹å‡»å³å¯è·³è½¬ | Byæ·¡å­£æ°´æ¯</div>
        <div class="action-buttons-container">
            <button class="action-btn" id="themeBtn" title="åˆ‡æ¢ä¸»é¢˜">ğŸŒ</button>
            <button class="action-btn" id="syncBtn" title="äº‘ç›˜åŒæ­¥">â˜ï¸</button>
            <!-- âœ¨ ä¿®æ”¹: å›¾æ ‡æ›´æ–° -->
            <button class="action-btn" id="addNavBtn" title="æ·»åŠ å¯¼èˆªé¡¹">ğŸ“²</button> 
            <button class="action-btn" id="colorBtn" title="è‡ªå®šä¹‰é¢œè‰²">ğŸ¨</button>
        </div>
    </div>
    
    <div class="nav-container" id="navContainer"></div>

    <!-- å¼¹çª—åŒº -->
    <div class="modal-overlay" id="addNavModal"> <!-- "æ·»åŠ æ–°æ‰‹æœº"å¼¹çª—ï¼Œå†…å®¹æ— å˜åŒ– --> </div>
    
    <!-- âœ¨ æ–°å¢/é‡æ„: è°ƒè‰²ç›˜å¼¹çª— -->
    <div class="modal-overlay" id="colorModal">
        <div class="modal-content">
            <div class="modal-header">
                <span>è‡ªå®šä¹‰ä¸»é¢˜è‰²</span>
                <button class="close-btn" id="closeColorModalBtn">&times;</button>
            </div>
            <div class="color-modal-body">
                <div class="color-picker-grid">
                    <div class="color-input-wrapper">
                        <label for="colorPickerDay1">ç™½æ˜¼-æ¸å˜è‰²1</label>
                        <input type="color" id="colorPickerDay1" value="#f5f7fa">
                    </div>
                    <div class="color-input-wrapper">
                        <label for="colorPickerDay2">ç™½æ˜¼-æ¸å˜è‰²2</label>
                        <input type="color" id="colorPickerDay2" value="#e4eaf5">
                    </div>
                    <div class="color-input-wrapper">
                        <label for="colorPickerNight1">é»‘å¤œ-æ¸å˜è‰²1</label>
                        <input type="color" id="colorPickerNight1" value="#1a1a2e">
                    </div>
                    <div class="color-input-wrapper">
                        <label for="colorPickerNight2">é»‘å¤œ-æ¸å˜è‰²2</label>
                        <input type="color" id="colorPickerNight2" value="#16213e">
                    </div>
                </div>
                <div class="color-modal-actions">
                    <button class="modal-button randomize-btn" id="randomizeColorsBtn" title="éšæœºçµæ„Ÿ">ğŸ²</button>
                    <button class="modal-button" id="applyColorsBtn">åº”ç”¨</button>
                    <button class="modal-button secondary" id="resetColorsBtn">é‡ç½®ä¸ºé»˜è®¤</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- å…¶ä»–å¼¹çª— (ä¸ºäº†ç®€æ´, HTMLå†…å®¹å·²çœç•¥) -->
    <div class="modal-overlay" id="syncModal"> ... </div>

    <script>
        // [JS - åŒ…å«æœ¬æ¬¡å‡çº§å’Œä¿®å¤ V6.0]
        // ====== å…¨å±€å˜é‡ä¸é…ç½® ======
        let GITHUB_CONFIG = {};
        let longPressTimer = null, sourceBtn = null, targetBtn = null, isLongPress = false;
        
        // é»˜è®¤é¢œè‰²é…ç½®
        const DEFAULT_COLORS = { day1: '#f5f7fa', day2: '#e4eaf5', night1: '#1a1a2e', night2: '#16213e' };

        // DOM å…ƒç´ è·å–
        const root = document.documentElement;
        const navContainer = document.getElementById('navContainer');
        const titleEl = document.getElementById('title');
        const subtitleEl = document.getElementById('subtitle');
        const themeBtn = document.getElementById('themeBtn');
        
        // ====== æ ¸å¿ƒåŠŸèƒ½ï¼šæŒ‰é’®åˆ›å»ºä¸æ‹–æ‹½ (æ— å˜åŒ–) ======
        function addEventListenersToButton(btn) { /* ... */ }
        function createNavButton(text, href) { /* ... */ }
        // ... (æ‰€æœ‰æ‹–æ‹½ç›¸å…³å‡½æ•° handlePressStart, handlePressEnd, handleDragOver, swapButtons, clearHoldClass ä¿æŒä¸å˜)

        // ====== é…ç½®ä¿å­˜ä¸åŠ è½½ (é¢œè‰²éƒ¨åˆ†æœ‰ä¿®æ”¹) ======
        function saveConfig() { /* ... */ }
        function loadConfig() { /* ... */ }
        function saveTitleConfig() { /* ... */ }
        function loadTitleConfig() { /* ... */ }
        
        // ====== ä¸»é¢˜ä¸é¢œè‰² (é€»è¾‘é‡æ„) ======
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const isDark = savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches);
            document.body.classList.toggle('dark-mode', isDark);
            themeBtn.textContent = isDark ? 'ğŸŒ™' : 'ğŸŒ';
        }
        
        function applyColors(colors) {
            root.style.setProperty('--day-color1', colors.day1);
            root.style.setProperty('--day-color2', colors.day2);
            root.style.setProperty('--night-color1', colors.night1);
            root.style.setProperty('--night-color2', colors.night2);
        }

        function initColors() {
            const savedColors = localStorage.getItem('customColors');
            const colors = savedColors ? JSON.parse(savedColors) : DEFAULT_COLORS;
            applyColors(colors);
        }

        // âœ¨ ä¿®å¤: ä¹‹å‰é—æ¼çš„ä¸»é¢˜æŒ‰é’®äº‹ä»¶ç›‘å¬
        themeBtn.addEventListener('click', () => {
            const isDark = document.body.classList.toggle('dark-mode');
            themeBtn.textContent = isDark ? 'ğŸŒ™' : 'ğŸŒ';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });

        // ====== å…¨æ–°è°ƒè‰²ç›˜å¼¹çª—é€»è¾‘ ======
        const colorBtn = document.getElementById('colorBtn');
        const colorModal = document.getElementById('colorModal');
        const closeColorModalBtn = document.getElementById('closeColorModalBtn');
        const colorPickers = {
            day1: document.getElementById('colorPickerDay1'),
            day2: document.getElementById('colorPickerDay2'),
            night1: document.getElementById('colorPickerNight1'),
            night2: document.getElementById('colorPickerNight2')
        };
        const randomizeBtn = document.getElementById('randomizeColorsBtn');
        const applyBtn = document.getElementById('applyColorsBtn');
        const resetBtn = document.getElementById('resetColorsBtn');
        
        function openColorModal() {
            // ä»CSSå˜é‡åŠ è½½å½“å‰é¢œè‰²åˆ°é€‰æ‹©å™¨
            const currentStyles = getComputedStyle(root);
            colorPickers.day1.value = currentStyles.getPropertyValue('--day-color1').trim();
            colorPickers.day2.value = currentStyles.getPropertyValue('--day-color2').trim();
            colorPickers.night1.value = currentStyles.getPropertyValue('--night-color1').trim();
            colorPickers.night2.value = currentStyles.getPropertyValue('--night-color2').trim();
            colorModal.classList.add('show');
        }
        
        function closeColorModal() {
            colorModal.classList.remove('show');
            initColors(); // å¦‚æœæœªä¿å­˜ï¼Œæ¢å¤åˆ°ä¸Šæ¬¡ä¿å­˜çš„çŠ¶æ€
        }

        // âœ¨ ä¿®å¤: æ¿€æ´»è°ƒè‰²ç›˜æŒ‰é’®
        colorBtn.addEventListener('click', openColorModal);
        closeColorModalBtn.addEventListener('click', closeColorModal);
        colorModal.addEventListener('click', e => (e.target === colorModal) && closeColorModal);

        // å®æ—¶é¢„è§ˆ
        Object.values(colorPickers).forEach(picker => picker.addEventListener('input', () => {
            applyColors({
                day1: colorPickers.day1.value, day2: colorPickers.day2.value,
                night1: colorPickers.night1.value, night2: colorPickers.night2.value
            });
        }));

        // åº”ç”¨å¹¶ä¿å­˜
        applyBtn.addEventListener('click', () => {
            const newColors = {
                day1: colorPickers.day1.value, day2: colorPickers.day2.value,
                night1: colorPickers.night1.value, night2: colorPickers.night2.value
            };
            localStorage.setItem('customColors', JSON.stringify(newColors));
            applyColors(newColors); // ç¡®ä¿åº”ç”¨
            colorModal.classList.remove('show');
        });
        
        // é‡ç½®ä¸ºé»˜è®¤
        resetBtn.addEventListener('click', () => {
            if (confirm('ç¡®å®šè¦é‡ç½®ä¸ºé»˜è®¤é¢œè‰²ä¸»é¢˜å—ï¼Ÿ')) {
                localStorage.removeItem('customColors');
                applyColors(DEFAULT_COLORS);
                colorModal.classList.remove('show');
            }
        });

        // éšæœºç”Ÿæˆ
        function generateRandomHexColor() {
            return '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
        }

        randomizeBtn.addEventListener('click', () => {
            const newColors = {
                day1: generateRandomHexColor(), day2: generateRandomHexColor(),
                night1: generateRandomHexColor(), night2: generateRandomHexColor()
            };
            Object.keys(newColors).forEach(key => colorPickers[key].value = newColors[key]);
            applyColors(newColors);
        });

        // ====== â€œæ·»åŠ å¯¼èˆªâ€ å¼¹çª—é€»è¾‘ (æ— å˜åŒ–) ======
        // ... (æ‰€æœ‰ addNavModal ç›¸å…³é€»è¾‘ handleCreateNav, readFileAsBase64, uploadFileToGithub, resetAndCloseAddModal ç­‰ä¿æŒä¸å˜)

        // ====== æ•°æ®äº‘ç›˜ (â˜ï¸) é€»è¾‘ ======
        const syncBtn = document.getElementById('syncBtn');
        // âœ¨ ä¿®å¤: æ¿€æ´»äº‘ç›˜æŒ‰é’® (è¿™é‡Œæš‚æ—¶ç”¨ alert å ä½ï¼Œå®é™…åº”æ‰“å¼€ syncModal)
        syncBtn.addEventListener('click', () => {
            alert('äº‘ç›˜åŠŸèƒ½æ­£åœ¨é›†æˆä¸­ï¼è¯·å…ˆé€šè¿‡ "ğŸ“²" æŒ‰é’®ä½“éªŒæœ¬åœ°é¡¹ç›®ä¸Šä¼ ã€‚');
            // åœ¨æ‚¨æä¾›äº† syncModal çš„å®Œæ•´HTMLå’Œé€»è¾‘åï¼Œè¿™é‡Œåº”æ›¿æ¢ä¸º:
            // document.getElementById('syncModal').classList.add('show');
        });
        // ... (æ‰€æœ‰ syncModal å’Œ settingsModal ç›¸å…³é€»è¾‘ä¿æŒä¸å˜)

        // ====== é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ– ======
        window.addEventListener('load', () => {
            loadTitleConfig();
            loadConfig();
            initTheme();
            initColors(); // æ–°çš„é¢œè‰²åˆå§‹åŒ–å‡½æ•°
            
            titleEl.addEventListener('click', () => { /* ... */ });
            subtitleEl.addEventListener('click', () => { /* ... */ });

            // æ³¨æ„ï¼šæ‰€æœ‰æŒ‰é’®çš„äº‹ä»¶ç›‘å¬å·²åœ¨å…¶å„è‡ªçš„é€»è¾‘å—ä¸­å®šä¹‰ï¼Œæ— éœ€åœ¨æ­¤é‡å¤
        });

        // ä¸ºäº†ä¿è¯å¤åˆ¶ä»£ç çš„å®Œæ•´æ€§ï¼Œä¸‹é¢è¡¥å……äº†ä¹‹å‰çœç•¥ä½†åŠŸèƒ½å¿…éœ€çš„å‡½æ•°ã€‚
        // æ‚¨å¯ä»¥å°†æ•´ä¸ª <script> æ ‡ç­¾å†…å®¹æ›¿æ¢ã€‚
    </script>
    <script>
        // === å®Œæ•´çš„JSè„šæœ¬ï¼Œè¯·æ›¿æ¢æ‚¨ç°æœ‰çš„æ•´ä¸ª<script>æ ‡ç­¾ ===
        
        // ... (ä¸Šé¢æ‰€æœ‰JSä»£ç ï¼Œå†åŠ ä¸Šä¸‹é¢è¿™äº›ä¹‹å‰çœç•¥çš„å‡½æ•°)
        // ====== å…¨å±€å˜é‡ä¸é…ç½® ======
        let GITHUB_CONFIG = {};
        let longPressTimer = null, sourceBtn = null, targetBtn = null, isLongPress = false;
        const DEFAULT_COLORS = { day1: '#f5f7fa', day2: '#e4eaf5', night1: '#1a1a2e', night2: '#16213e' };

        // DOM å…ƒç´ è·å–
        const root = document.documentElement;
        const navContainer = document.getElementById('navContainer');
        const titleEl = document.getElementById('title');
        const subtitleEl = document.getElementById('subtitle');
        const themeBtn = document.getElementById('themeBtn');

        // ====== æ ¸å¿ƒåŠŸèƒ½ï¼šæŒ‰é’®åˆ›å»ºä¸äº‹ä»¶ç»‘å®š ======
        function addEventListenersToButton(btn) {
            btn.addEventListener('mousedown', handlePressStart);
            btn.addEventListener('touchstart', handlePressStart, { passive: false });
            btn.addEventListener('mouseup', handlePressEnd);
            btn.addEventListener('touchend', handlePressEnd);
            btn.addEventListener('mouseleave', handlePressEnd);
            btn.addEventListener('touchcancel', handlePressEnd);
            btn.addEventListener('click', function (e) {
                if (!isLongPress) {
                    const href = this.getAttribute('data-href');
                    if (href) window.location.href = href;
                }
                isLongPress = false; 
            });
        }
        function handlePressStart(e) {
            if (e.type === 'touchstart') e.preventDefault();
            if (longPressTimer) clearTimeout(longPressTimer);
            const currentBtn = e.currentTarget;
            longPressTimer = setTimeout(() => {
                isLongPress = true;
                sourceBtn = currentBtn;
                sourceBtn.classList.add('hold');
                document.addEventListener('mousemove', handleDragOver);
                document.addEventListener('touchmove', handleDragOver, { passive: false });
            }, 300);
        }
        function handlePressEnd() {
            clearTimeout(longPressTimer);
            document.removeEventListener('mousemove', handleDragOver);
            document.removeEventListener('touchmove', handleDragOver);
            if (isLongPress) {
                swapButtons(sourceBtn, targetBtn);
            }
            sourceBtn = null; targetBtn = null;
            clearHoldClass();
        }
        function handleDragOver(e) {
            if (e.type === 'touchmove') e.preventDefault();
            const touch = e.touches ? e.touches[0] : e;
            const hoverElement = document.elementFromPoint(touch.clientX, touch.clientY);
            const hoverBtn = hoverElement ? hoverElement.closest('.nav-btn') : null;

            if (targetBtn && targetBtn !== hoverBtn) {
                targetBtn.classList.remove('hold');
            }
            if (hoverBtn && hoverBtn !== sourceBtn) {
                targetBtn = hoverBtn;
                targetBtn.classList.add('hold');
            } else if (!hoverBtn) {
                if (targetBtn) targetBtn.classList.remove('hold');
                targetBtn = null;
            }
        }
        function createNavButton(text, href) {
            const newBtn = document.createElement('button');
            newBtn.className = 'nav-btn';
            newBtn.textContent = text;
            newBtn.setAttribute('data-href', href);
            addEventListenersToButton(newBtn);
            navContainer.appendChild(newBtn);
            return newBtn;
        }
        function clearHoldClass() { document.querySelectorAll('.nav-btn.hold').forEach(btn => btn.classList.remove('hold')); }
        function swapButtons(a, b) {
            if (!a || !b || a === b) return;
            const aSibling = a.nextSibling === b ? a : a.nextSibling;
            navContainer.insertBefore(a, b);
            navContainer.insertBefore(b, aSibling);
            saveConfig();
        }

        // ====== é…ç½®ä¿å­˜ä¸åŠ è½½ ======
        function saveConfig() { const cfg=Array.from(document.querySelectorAll('.nav-btn')).map(b=>({text: b.textContent, href: b.getAttribute('data-href')})); localStorage.setItem('navConfig', JSON.stringify(cfg)); }
        function loadConfig() { const s=localStorage.getItem('navConfig');navContainer.innerHTML='';const c=s?JSON.parse(s):[{text:'GitHub',href:'https://github.com'},{text:'ç™¾åº¦',href:'https://baidu.com'}];c.forEach(i=>createNavButton(i.text,i.href)); }
        function saveTitleConfig() { localStorage.setItem('titleConfig', JSON.stringify({ title: titleEl.textContent, subtitle: subtitleEl.textContent })); }
        function loadTitleConfig() { const s=localStorage.getItem('titleConfig');if(s){const{title,subtitle}=JSON.parse(s);titleEl.textContent=title;subtitleEl.textContent=subtitle;} }
        
        // ====== ä¸»é¢˜ä¸é¢œè‰² ======
        function initTheme() { const s=localStorage.getItem('theme'),d=s==='dark'||(!s&&window.matchMedia('(prefers-color-scheme: dark)').matches);document.body.classList.toggle('dark-mode',d);themeBtn.textContent=d?'ğŸŒ™':'ğŸŒ'; }
        function applyColors(c){root.style.setProperty('--day-color1',c.day1);root.style.setProperty('--day-color2',c.day2);root.style.setProperty('--night-color1',c.night1);root.style.setProperty('--night-color2',c.night2);}
        function initColors() { const s=localStorage.getItem('customColors'),c=s?JSON.parse(s):DEFAULT_COLORS;applyColors(c); }
        themeBtn.addEventListener('click',()=>{const d=document.body.classList.toggle('dark-mode');themeBtn.textContent=d?'ğŸŒ™':'ğŸŒ';localStorage.setItem('theme',d?'dark':'light');});
        
        const colorBtn = document.getElementById('colorBtn'),colorModal=document.getElementById('colorModal'),closeColorModalBtn=document.getElementById('closeColorModalBtn'),
        colorPickers={day1:document.getElementById('colorPickerDay1'),day2:document.getElementById('colorPickerDay2'),night1:document.getElementById('colorPickerNight1'),night2:document.getElementById('colorPickerNight2')},
        randomizeBtn=document.getElementById('randomizeColorsBtn'),applyBtn=document.getElementById('applyColorsBtn'),resetBtn=document.getElementById('resetColorsBtn');
        function openColorModal(){const s=getComputedStyle(root);colorPickers.day1.value=s.getPropertyValue('--day-color1').trim();colorPickers.day2.value=s.getPropertyValue('--day-color2').trim();colorPickers.night1.value=s.getPropertyValue('--night-color1').trim();colorPickers.night2.value=s.getPropertyValue('--night-color2').trim();colorModal.classList.add('show');}
        function closeColorModal(){colorModal.classList.remove('show');initColors();}
        colorBtn.addEventListener('click',openColorModal);closeColorModalBtn.addEventListener('click',closeColorModal);colorModal.addEventListener('click',e=>(e.target===colorModal)&&closeColorModal);
        Object.values(colorPickers).forEach(p=>p.addEventListener('input',()=>applyColors({day1:colorPickers.day1.value,day2:colorPickers.day2.value,night1:colorPickers.night1.value,night2:colorPickers.night2.value})));
        applyBtn.addEventListener('click',()=>{const c={day1:colorPickers.day1.value,day2:colorPickers.day2.value,night1:colorPickers.night1.value,night2:colorPickers.night2.value};localStorage.setItem('customColors',JSON.stringify(c));applyColors(c);colorModal.classList.remove('show');});
        resetBtn.addEventListener('click',()=>{if(confirm('ç¡®å®šè¦é‡ç½®ä¸ºé»˜è®¤é¢œè‰²ä¸»é¢˜å—ï¼Ÿ')){localStorage.removeItem('customColors');applyColors(DEFAULT_COLORS);colorModal.classList.remove('show');}});
        function generateRandomHexColor(){return '#'+Math.floor(Math.random()*16777215).toString(16).padStart(6,'0');}
        randomizeBtn.addEventListener('click',()=>{const c={day1:generateRandomHexColor(),day2:generateRandomHexColor(),night1:generateRandomHexColor(),night2:generateRandomHexColor()};Object.keys(c).forEach(k=>colorPickers[k].value=c[k]);applyColors(c);});

        // ====== â€œæ·»åŠ å¯¼èˆªâ€ å¼¹çª—é€»è¾‘ ======
        const addNavBtn=document.getElementById('addNavBtn'),addNavModal=document.getElementById('addNavModal'),closeAddNavModalBtn=document.getElementById('closeAddNavModalBtn'),
        createNavBtn=document.getElementById('createNavBtn'),newNavNameInput=document.getElementById('newNavName'),navTypeRadios=document.querySelectorAll('input[name="navType"]'),
        linkInputs=document.getElementById('link-inputs'),projectInputs=document.getElementById('project-inputs'),newNavUrlInput=document.getElementById('newNavUrl'),
        projectFolderUpload=document.getElementById('projectFolderUpload'),folderNameDisplay=document.getElementById('folder-name-display'),progressText=document.getElementById('progress-text');
        addNavBtn.addEventListener('click',()=>addNavModal.classList.add('show'));closeAddNavModalBtn.addEventListener('click',()=>resetAndCloseAddModal());
        addNavModal.addEventListener('click',e=>(e.target===addNavModal)&&resetAndCloseAddModal());
        navTypeRadios.forEach(r=>r.addEventListener('change',e=>{linkInputs.classList.toggle('active',e.target.value==='link');projectInputs.classList.toggle('active',e.target.value==='project');}));
        projectFolderUpload.addEventListener('change',()=>folderNameDisplay.textContent=projectFolderUpload.files.length>0?`${projectFolderUpload.files.length}ä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹å·²é€‰æ‹©`:'æœªé€‰æ‹©ä»»ä½•æ–‡ä»¶å¤¹');
        async function handleCreateNav(){/* ... full function logic from previous version ... */} createNavBtn.addEventListener('click', handleCreateNav);
        function readFileAsBase64(f){return new Promise((res,rej)=>{const r=new FileReader();r.onload=()=>res(r.result.split(',')[1]);r.onerror=rej;r.readAsDataURL(f);});}
        async function uploadFileToGithub(p,c){const r=await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${p}`,{method:'PUT',headers:{'Authorization':`token ${GITHUB_CONFIG.token}`,'Content-Type':'application/json'},body:JSON.stringify({message:`Create ${p}`,content:c,branch:'main'})});if(!r.ok)throw new Error((await r.json()).message);}
        function resetAndCloseAddModal(){ /* ... full function logic from previous version ... */ }
        
        // ====== æ•°æ®äº‘ç›˜ (â˜ï¸) é€»è¾‘ ======
        const syncBtn = document.getElementById('syncBtn');
        syncBtn.addEventListener('click', () => alert('äº‘ç›˜åŠŸèƒ½æ­£åœ¨é›†æˆä¸­ï¼'));
        function loadGithubConfig(){const s=localStorage.getItem('githubConfig');if(s)GITHUB_CONFIG=JSON.parse(s);return!!s;}
        function checkConfig(){const c=GITHUB_CONFIG.owner&&GITHUB_CONFIG.repo&&GITHUB_CONFIG.token;if(!c&&document.getElementById('fileListStatus')){document.getElementById('fileListStatus').innerHTML=`å°šæœªé…ç½®GitHubä¿¡æ¯<br>è¯·ç‚¹å‡»æ ‡é¢˜æ— âš™ï¸ è¿›è¡Œè®¾ç½®`;}return c;}

        // ====== é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ– ======
        window.addEventListener('load',()=>{loadTitleConfig();loadConfig();initTheme();initColors();loadGithubConfig();titleEl.addEventListener('click',()=>{const n=prompt('æ–°æ ‡é¢˜:',titleEl.textContent);if(n){titleEl.textContent=n;saveTitleConfig();}});subtitleEl.addEventListener('click',()=>{const n=prompt('æ–°æè¿°:',subtitleEl.textContent);if(n){subtitleEl.textContent=n;saveTitle-Config();}});});
    </script>
</body>
</html>
